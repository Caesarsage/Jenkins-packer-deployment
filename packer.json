{
  "variables": {
    "description" : "myWebServer",
    "access_key" : "{{env `ACCESS_KEY`}}",
    "secret_key" : "{{env `SECRET_KEY`}}"
  },
  "builders": [
    {
      "type": "amazon-ebs",
      "access_key": "{{user `ACCESS_KEY}}",
      "secret_key": "{user `SECRET_KEY}",
      "region" : "us-east-1",
      "ami_name" : "{{user `description`}}",
      "source_ami" : "ami-0022f774911c1d690",
      "instance_type" : "t2.micro",
      "ssh_username" : "ec2-user"
    }
  ],
  "provisioners": [
    {
      "type": "shell",
      "script": "setup.sh"
    }
  ],
  "post-processors": [
    {
      "type": "manifest",
      "output": "{{user `description`}}.json"
    }
  ],
  "sensitive-variables": [ 
    "secret_key",
    "access_key"
  ]
}